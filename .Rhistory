seq(term(20104, "sims"), term(20122, "sims"))
usethis::use_package("purrr")
devtools::document()
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::document()
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
conv_term(20142)
rsfsu::conv_term(20142)
rsfsu::conv_term(c(20142, 20162))
map(c(20144, 20192), rsfsu::conv_term)
map_chr(c(20144, 20192), rsfsu::conv_term)
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
x <- seq(term(20104, "sims"), term(20122, "sims"))
x
vec_cast(x, term())
vec_cast(x, term(origin = "sims"))
vec_cast(x, term(x, origin = "sims"))
x
vec_cast(x, term())
vec_cast(x, new_term())
new_term(20104)
new_term(20104, "sims")
new_term(c(20104, 20122), "sims")
nchar(x)
devtools::load_all()
new_term(c(20104, 20122), "sims")
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
?new_vctr
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
new_term(c(20104, 20122))
new_term(c(20104, 20122), "sims")
new_term(20104)
devtools::load_all()
new_term(20104)
devtools::load_all()
new_term(20104)
new_term(20104, "sims")
new_term(2010, "cs")
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
new_term(c(20104, 20122), "sims")
all(c(5, 5))
all(c(5, 5) == 5)
x <- c(5, 5)
all(x) != 5
all(x != 5
)
devtools::load_all()
new_term(c(20104, 20122), "sims")
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"))
seq(term(20104, "sims"), term(20122, "sims"), include = "all")
seq(term(20104, "sims"), term(20122, "sims"))
seq(term(20102, "sims"), term(20122, "sims"))
seq(term(20102, "sims"), term(20122, "sims"), "all")
seq(term(20104, "sims"), term(20122, "sims"), "all")
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"), "all")
devtools::load_all()
seq(term(20104, "sims"), term(20122, "sims"), "all")
seq(term(20104, "sims"), term(20122, "sims"))
seq(term(20102, "sims"), term(20122, "sims"))
seq(term(20102, "sims"), term(20122, "sims"), "all")
seq(term(20102, "sims"), term(20123, "sims"), "all")
seq(term(20102, "sims"), term(20123, "sims"), "fasp")
devtools::load_all()
seq(term(20102, "sims"), term(20123, "sims"), "fasp")
devtools::load_all()
seq(term(20102, "sims"), term(20123, "sims"), "fasp")
seq(term(20102, "sims"), term(20123, "sims"), "all")
seq(term(20104), 20122)
seq(term(20104, "sims"), 20122)
devtools::load_all()
seq(term(20104), 20122)
seq(term(20104), 20122, "all")
seq(term(2123, "cs"), term(2147, "cs"))
term(2123, "cs")
term(2147, "cs")
x <- term(2123, "cs")
term_origin(x)
rsfsu::conv_term(2123)
cs_terms <- c(2123, 2125, 2127)
map(cs_terms, conv_term)
map(cs_terms, rsfsu::conv_term)
devtools::load_all()
seq(term(2123, "cs"), term(2147, "cs"))
devtools::load_all()
seq(term(2123, "cs"), term(2147, "cs"))
seq(term(2123, "cs"), term(2147, "cs"), "all")
seq(term(2123, "cs"), 2147, "all")
?rsfsu::ers_term()
substr(2123, 1, 3)
cal_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
if (origin == "sims") return(substr(x, 1, 4))
bits <- strsplit(x, "")[[1]]
paste0(bits[1], "0", bits[2:3])
}
x <- term(20124)
x
cal_year(x)
cal_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
if (origin == "sims") out <- substr(x, 1, 4)
else {
bits <- strsplit(x, "")[[1]]
out <- paste0(bits[1], "0", bits[2:3])
}
as.numeric(out)
}
cal_year(x)
x <- term(2123, "cs")
cal_year(x)
?strsplit
strsplit(x, "")
cal_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
if (origin == "sims") out <- substr(x, 1, 4)
else {
vctrs::vec_cast(x, character())
bits <- strsplit(x, "")[[1]]
out <- paste0(bits[1], "0", bits[2:3])
}
as.numeric(out)
}
cal_year(x)
vec_cast(x, character())
strsplit(vec_cast(x, character()), "")
strsplit(vec_cast(x, character()), "")[[1]]
cal_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
if (origin == "sims") out <- substr(x, 1, 4)
else {
xchar <- vctrs::vec_cast(x, character())
bits <- strsplit(xchar, "")[[1]]
out <- paste0(bits[1], "0", bits[2:3])
}
as.numeric(out)
}
cal_year(x)
cal_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
if (origin == "sims") out <- substr(x, 1, 4)
else {
xchar <- vctrs::vec_cast(x, character())
bits <- strsplit(xchar, "")[[1]]
return(bits)
}
as.numeric(out)
}
cal_year(x)
y <- cal_year(x)
paste0(y[1], "0", y[2:3])
paste(y[1], "0", y[2:3], collapse = "")
paste0(y[1], "0")
paste0(y[1], "0", "S")
paste0(y[1], "0", y[2])
paste0(y[1], "0", y[2], y[3])
cal_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
if (origin == "sims") out <- substr(x, 1, 4)
else {
xchar <- vctrs::vec_cast(x, character())
bits <- strsplit(xchar, "")[[1]]
paste0(bits[1], 0, bits[2], bits[3])
}
as.numeric(out)
}
y <- cal_year(x)
cal_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
if (origin == "sims") out <- substr(x, 1, 4)
else {
xchar <- vctrs::vec_cast(x, character())
bits <- strsplit(xchar, "")[[1]]
out <- paste0(bits[1], 0, bits[2], bits[3])
}
as.numeric(out)
}
cal_year(y)
y
x
cal_year(x)
seq(term(20104), 20162)
library(tidyverse)
tibble(term = seq(term(20104), 20162))
term %>% mutate(cal_year = cal_year(term))
term %>% mutate(year = cal_year(term))
x <- seq(term(20104), 20162)
x
cal_year(x)
df <- tibble(term = seq(term(20104), 20162))
cal_year(df$term)
mutate(df, year = cal_year(term))
df %>%
mutate(year = cal_year(term))
tibble(term = seq(term(2123, "cs"), 2147))
tibble(term = seq(term(2123, "cs"), 2147, "all"))
tibble(term = seq(term(2123, "cs"), 2147, "all")) %>% mutate(year = cal_year(term))
tibble(term = seq(term(2123, "cs"), 2147, "all")) %>%
rowwise() %>%
mutate(year = cal_year(term))
df %>%
mutate(year = cal_year(term))
tibble(term = seq(term(2123, "cs"), 2147, "all")) %>%
# rowwise() %>%
mutate(year = cal_year(term))
tibble(term = seq(term(2123, "cs"), 2147, "all")) %>%
rowwise() %>%
mutate(year = cal_year(term))
substr("20122", 5, 5)
stringr::str_sub("20122", end = -2)
stringr::str_sub("2123", 2, 3)
acad_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
vctrs::vec_cast(x, character())
term <- substr(x, 5, 5)
# For SIMS terms
if (origin == "sims") {
y <- as.numeric(substr(x, 1, 4))
if (term == "2") {
y1 <- y - 1
y2 <- substr(y, 1, 3)
yt <- paste0(y1, "-", y2)
} else {
y2 <- y + 1
y2s <- substr(y2, 1, 3)
yt <- paste0(y, "-", y2s)
}
# For CS terms
} else {
y <- as.numeric(substr(year_term, 2, 3))
if (term == "3") {
y1 <- y - 1
y1 <- paste0("20", y1)
yt <- paste0(y1, "-", y)
} else {
y2 <- y + 1
yt <- paste0("20", y, "-", y2)
}
}
yt
}
acad_year(term(20122))
acad_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
vctrs::vec_cast(x, character())
term <- substr(x, 5, 5)
# For SIMS terms
if (origin == "sims") {
y <- as.numeric(substr(x, 1, 4))
if (term == "2") {
y1 <- y - 1
y2 <- substr(y, 1, 4)
yt <- paste0(y1, "-", y2)
} else {
y2 <- y + 1
y2s <- substr(y2, 1, 4)
yt <- paste0(y, "-", y2s)
}
# For CS terms
} else {
y <- as.numeric(substr(year_term, 2, 3))
if (term == "3") {
y1 <- y - 1
y1 <- paste0("20", y1)
yt <- paste0(y1, "-", y)
} else {
y2 <- y + 1
yt <- paste0("20", y, "-", y2)
}
}
yt
}
acad_year(term(20122))
acad_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
vctrs::vec_cast(x, character())
term <- substr(x, 5, 5)
# For SIMS terms
if (origin == "sims") {
y <- as.numeric(substr(x, 1, 4))
if (term == "2") {
y1 <- y - 1
y2 <- substr(y, 3, 4)
yt <- paste0(y1, "-", y2)
} else {
y2 <- y + 1
y2s <- substr(y2, 3, 4)
yt <- paste0(y, "-", y2s)
}
# For CS terms
} else {
y <- as.numeric(substr(year_term, 2, 3))
if (term == "3") {
y1 <- y - 1
y1 <- paste0("20", y1)
yt <- paste0(y1, "-", y)
} else {
y2 <- y + 1
yt <- paste0("20", y, "-", y2)
}
}
yt
}
acad_year(term(20122))
acad_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
vctrs::vec_cast(x, character())
term <- substr(x, 5, 5)
# For SIMS terms
if (origin == "sims") {
y <- as.numeric(substr(x, 1, 4))
if (term == "2") {
y1 <- y - 1
y2 <- substr(y, 3, 4)
yt <- paste0(y1, "-", y2)
} else {
y2 <- y + 1
y2s <- substr(y2, 3, 4)
ay <- paste0(y, "-", y2s)
}
# For CS terms
} else {
y <- as.numeric(substr(year_term, 2, 3))
if (term == "3") {
y1 <- y - 1
y1 <- paste0("20", y1)
yt <- paste0(y1, "-", y)
} else {
y2 <- y + 1
ay <- paste0("20", y, "-", y2)
}
}
ay
}
acad_year(term(20122))
acad_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
vctrs::vec_cast(x, character())
term <- substr(x, 5, 5)
# For SIMS terms
if (origin == "sims") {
y <- as.numeric(substr(x, 1, 4))
if (term == "2") {
y1 <- y - 1
y2 <- substr(y, 3, 4)
ay <- paste0(y1, "-", y2)
} else {
y2 <- y + 1
y2s <- substr(y2, 3, 4)
ay <- paste0(y, "-", y2s)
}
# For CS terms
} else {
y <- as.numeric(substr(year_term, 2, 3))
if (term == "3") {
y1 <- y - 1
y1 <- paste0("20", y1)
ay <- paste0(y1, "-", y)
} else {
y2 <- y + 1
ay <- paste0("20", y, "-", y2)
}
}
ay
}
acad_year(term(20122))
acad_year(term(2123))
acad_year(term(2123, "cs"))
acad_year <- function(x) {
stopifnot(is_term(x))
origin <- term_origin(x)
vctrs::vec_cast(x, character())
term <- substr(x, 5, 5)
# For SIMS terms
if (origin == "sims") {
y <- as.numeric(substr(x, 1, 4))
if (term == "2") {
y1 <- y - 1
y2 <- substr(y, 3, 4)
ay <- paste0(y1, "-", y2)
} else {
y2 <- y + 1
y2s <- substr(y2, 3, 4)
ay <- paste0(y, "-", y2s)
}
# For CS terms
} else {
y <- as.numeric(substr(x, 2, 3))
if (term == "3") {
y1 <- y - 1
y1 <- paste0("20", y1)
ay <- paste0(y1, "-", y)
} else {
y2 <- y + 1
ay <- paste0("20", y, "-", y2)
}
}
ay
}
acad_year(term(2123, "cs"))
?attributes
?attr
devtools::load_all()
tibble(term = seq(term(2123, "cs"), 2147, "all"))
df2 <- tibble(term = seq(term(2123, "cs"), 2147, "all")) %>%
rowwise() %>%
mutate(year = cal_year(term))
df2
glimpse(df2)
attributes(df2)
str(df2)
devtools::load_all()
df2 <- tibble(term = seq(term(2123, "cs"), 2147, "all"))
devtools::load_all()
df2 <- tibble(term = seq(term(2123, "cs"), 2147, "all"))
df2
df2 %>%
rowwise() %>%
mutate(
year = cal_year(term),
acad_year = acad_year(term)
)
term = seq(term(2123, "cs"), 2147, "all")
term
acad_year(term)
map(term, acad_year)
acad_year(term(20122))
acad_year(term(2123))
acad_year(term(2123, "cs"))
term
cal_year(term)
term
cal_year(term[1])
acad_year(term[1])
cs_term = seq(term(2123, "cs"), 2147, "all")
sims_term <- seq(term(20122), 20162)
sims_term
acad_year(sims_term)
cal_year(sims_term)
cal_year(sims_term)
cal_year(sims_term)
cal_year(sims_term)
devtools::load_all()
devtools::document()
devtools::load_all()
devtools::load_all()
install.packages("vctrs")
install.packages("vctrs")
library(vctrs)
